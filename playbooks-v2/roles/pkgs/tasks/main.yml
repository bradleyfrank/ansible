---

- name: Include Homebrew tasks
  ansible.builtin.include_tasks:
    file: "pkg_mgr/homebrew.yml"
  when: (ansible_facts['system'] == "Darwin") or (pkgs_prefer_homebrew)
  tags: always

- name: Include system-specific tasks
  ansible.builtin.include_tasks:
    file: "system/{{ ansible_facts['system'] }}"
  tags: always

- name: Download binaries
  ansible.builtin.get_url:
    url: "{{ item['url'] }}"
    dest: "{{ pkgs_binary_install_path }}/{{ item['name'] }}"
    mode: "0755"
  loop: "{{ pkg_binaries }}"
  tags: [packages, binaries, dotfiles]
