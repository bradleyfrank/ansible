---

- name: "Manage dotfiles"
  hosts: localhost
  tasks:

    - name: "Create development folder structure"
      ansible.builtin.file:
        path: "{{ ansible_facts['user_dir'] }}/{{ item }}"
        state: directory
        mode: "0644"
        recurse: false
      loop:
        - "Development/Projects"
        - "Development/Notes"
        - "Development/Scratch"
        - "Development/Logs"
        - "Development/Build"

    - name: "Sync dotfiles"
      ansible.posix.synchronize:
        src: "dotfiles"
        dest: "{{ ansible_facts['user_dir'] }}/"
        compress: false
        owner: false
        group: false

    - ansible.builtin.import_role: { name: "ssh" }
    - ansible.builtin.import_role: { name: "git" }
    - ansible.builtin.import_role: { name: "cloud" }
    - ansible.builtin.import_role: { name: "tmux" }
    - ansible.builtin.import_role: { name: "vim" }
    - ansible.builtin.import_role: { name: "zsh" }
