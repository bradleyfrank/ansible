---

- name: Cleanup old settings and files
  hosts: localhost

  vars:
    files:
      - .ansible_vault_password
      - .dotfiles
      - .config/p10k.zsh
      - .local/bin/diff-so-fancy
      - .local/bin/lib
      - .local/bin/gcp-kubeconfigs
      - .local/bin/gcpkonfig
      - .local/bin/orm
      - .local/bin/tmux-*
      - .local/share/fubectl
      - .local/share/kubectl
      - .local/share/alacritty
      - .local/share/icons
      - .local/share/zshrc/pipenv
      - .local/share/zshrc/kubectl
      - .local/share/zshrc/op
      - .hyper.js
      - .hyper_plugins

    brew_packages:
      - diff-so-fancy
      - ffsend
      - hstr
      - tmux-mem-cpu-load
      - yq

    brew_casks:
      - anylist
      - firefox-nightly
      - hyper
      - qownnotes
      - openshot-video-editor
      - raindropio
      - stay
      - sublime-text
      - typora
      - vivaldi

  tasks:
    - name: Remove files
      ansible.builtin.file:
        path: "{{ ansible_user_dir }}/{{ item }}"
        state: absent
      loop: "{{ files }}"

    - name: Uninstall Homebrew packages
      community.general.homebrew:
        name: "{{ brew_packages }}"
        state: absent
      when: ansible_system == 'Darwin'

    - name: Uninstall Homebrew casks
      community.general.homebrew_cask:
        name: "{{ brew_casks }}"
        state: absent
      when: ansible_system == 'Darwin'
