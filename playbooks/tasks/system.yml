---

- name: Make bash default for root
  ansible.builtin.user:
    name: root
    shell: "{{ bash_shell }}"
  become: true
  tags: [root, shell]

- name: Clone dotfiles repo
  ansible.builtin.git:
    accept_hostkey: true
    depth: 1
    dest: "{{ root_home }}/.dotfiles"
    repo: "{{ dotfiles_collection }}"
  become: true
  tags: [root, dotfiles]

- name: Install root dotfiles
  ansible.builtin.copy:
    remote_src: true
    src: "{{ root_home }}/.dotfiles/{{ root_dotfiles }}/"
    dest: "{{ root_home }}/"
    mode: 0644
  become: true
  tags: [root, dotfiles]

- name: Configure system settings
  ansible.builtin.include_tasks: "system/{{ ansible_system }}.yml"
  tags: always
