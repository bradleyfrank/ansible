---

- name: Create ~/Development folder structure
  ansible.builtin.file:
    path: "{{ ansible_user_dir }}/Development/{{ item }}"
    state: directory
    mode: 0755
  loop: ['Projects', 'Build', 'Scratch', 'Reference']

- name: Clone reference Git repos
  ansible.builtin.git:
    repo: "{{ item.repo }}"
    dest: "{{ git_reference_repos_dest }}/{{ item.name }}"
    depth: '1'
    version: "{{ item.version | default(omit) }}"
  loop: "{{ git_reference_repos }}"

- name: Create ~/.local folder structure
  ansible.builtin.file:
    path: "{{ ansible_user_dir }}/.local/{{ item }}"
    state: directory
    mode: 0755
  loop: ['bin', 'etc', 'include', 'lib', 'opt', 'share', 'var']

- name: Create vim extensions directory path
  ansible.builtin.file:
    path: "{{ vim_extensions_dest }}"
    state: directory
    mode: 0755

- name: Ensure fonts directory exists
  ansible.builtin.file:
    path: "{{ font_dir }}"
    state: directory
    mode: 0700

- name: Fix permissions for zsh
  ansible.builtin.file:
    path: "{{ item }}"
    mode: 0755
  loop:
    - /usr/local/share
    - /usr/local/share/zsh
    - /usr/local/share/zsh/site-functions
