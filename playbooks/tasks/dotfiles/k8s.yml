---

- name: Install Krew plugins
  environment:
    PATH: "{{ ansible_user_dir }}/.krew/bin:{{ path }}"
  ansible.builtin.command: "kubectl krew install {{ krew_plugins[ansible_architecture] | join(' ') }}"
  register: kubectl_krew_install
  changed_when: "'Installed plugin' in kubectl_krew_install['stdout']"
  tags: krew

- name: Install k9s configs
  ansible.builtin.copy:
    src: apps/k9s
    dest: "{{ k9s_config_path }}/"
    mode: 0644
  tags: k9s
