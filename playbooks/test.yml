---

- name: Debug
  hosts: localhost

  vars:
    system_dconf_defaults:
      /org/cinnamon:
        enabled-applets: "['panel1:left:0:menu@cinnamon.org:0', 'panel1:left:1:separator@cinnamon.org:1', 'panel1:left:2:grouped-window-list@cinnamon.org:2', 'panel1:right:0:systray@cinnamon.org:3', 'panel1:right:1:xapp-status@cinnamon.org:4', 'panel1:right:2:notifications@cinnamon.org:5', 'panel1:right:3:printers@cinnamon.org:6', 'panel1:right:4:removable-drives@cinnamon.org:7', 'panel1:right:5:keyboard@cinnamon.org:8', 'panel1:right:6:favorites@cinnamon.org:9', 'panel1:right:7:network@cinnamon.org:10', 'panel1:right:8:sound@cinnamon.org:11', 'panel1:right:9:power@cinnamon.org:12', 'panel1:right:10:calendar@cinnamon.org:13', 'panel1:right:11:cornerbar@cinnamon.org:14']"
      /org/gnome/terminal/legacy/profiles:/:b1dcc9dd-5262-4d8d-a863-c897e6d979b9:
        background-color: "'rgb(253,246,227)'"
        foreground-color: "'rgb(101,123,131)'"
        palette: "['rgb(7,54,66)', 'rgb(220,50,47)', 'rgb(133,153,0)', 'rgb(181,137,0)', 'rgb(38,139,210)', 'rgb(211,54,130)', 'rgb(42,161,152)', 'rgb(238,232,213)', 'rgb(0,43,54)', 'rgb(203,75,22)', 'rgb(88,110,117)', 'rgb(101,123,131)', 'rgb(131,148,150)', 'rgb(108,113,196)', 'rgb(147,161,161)', 'rgb(253,246,227)']"

    system_dconf_overrides:
      /org/gnome/terminal/legacy/profiles:/:b1dcc9dd-5262-4d8d-a863-c897e6d979b9:
        background-color: "'rgb(200,200,200)'"
        transparent-color: "'rgb(100,100,100)'"


  tasks:
    - name: SetFact
      ansible.builtin.set_fact:
        system_dconf: "{{ system_dconf_defaults | combine(system_dconf_overrides, recursive=True) }}"

    - name: Debug0
      vars:
        dconf_key: "{{ item['key'] }}"
        dconf_attribs: "{{ item['value'] | dict2items }}"
      ansible.builtin.debug:
        #msg: "{{ dconf_attribs['key'] }}: {{ dconf_attribs | map(attribute='value') }}"
        msg: "{{ dconf_attribs }}"
      loop: "{{ system_dconf | dict2items }}"
      loop_control:
        label: "{{ item['key'] }}"

#    - name: Debug1
#      ansible.builtin.debug:
#        msg: "{{ system_dconf_defaults | community.general.lists_mergeby(system_dconf_overrides, 'key') }}"
