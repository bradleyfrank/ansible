---

- name: Download latest version of Nerd Fonts
  vars:
    slug: "{{ fonts_github_user }}/{{ fonts_github_repo }}"
  ansible.builtin.get_url:
    url: "https://github.com/{{ slug }}/releases/download/{{ fonts_latest_version }}/{{ item }}.zip"
    dest: "/tmp/{{ item }}.zip"
    mode: "0644"
  tags: [fonts]

- name: Extract Nerd Fonts
  vars:
    version: "{{ nerd_fonts_latest_release['tag'] }}"
  ansible.builtin.unarchive:
    src: "/tmp/{{ item }}.zip"
    dest: "{{ fonts_dir }}/"
  tags: [fonts]

- name: Delete zip file
  ansible.builtin.file:
    state: "absent"
    path: "/tmp/{{ item }}.zip"
  tags: [fonts]
