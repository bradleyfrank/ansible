#!/usr/bin/env bash

#
# A youtube-dl wrapper to making downloading music and video easier.
# Author: Brad Frank
# Date: July 2021
# Tested: GNU bash, version 5.0.18(1)-release (x86_64-apple-darwin19.6.0)
# Requires: youtube-dl
#

function music() {
  case $(uname -s) in
    Darwin)
      youtube-dl --format bestaudio --extract-audio --audio-format mp3 \
        --postprocessor-args "-strict experimental" "$1" ;;
    Linux)
      youtube-dl --format bestaudio --extract-audio --audio-format mp3 "$1" ;;
  esac
}

function video() {
  youtube-dl \
    --format "bestvideo+bestaudio[ext=m4a]/bestvideo+bestaudio/best" \
    --merge-output-format mp4 \
    -o "%(title)s.%(ext)s" "$1"
}

case "$1" in music) music "$@" ;; video) video "$@" ;; *) command youtube-dl "$@"; esac
